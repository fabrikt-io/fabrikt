openapi: 3.0.1
info: {}
components:
  schemas:
    Items:
      description: List of wardrobe items
      required:
        - items
        - pagination
      properties:
        items:
          minItems: 0
          type: array
          items:
            $ref: '#/components/schemas/ItemReference'
    ItemReference:
      oneOf:
        - $ref: '#/components/schemas/LikedProductReference'
        - $ref: '#/components/schemas/PurchasedProductReference'
        - $ref: '#/components/schemas/UploadedItemReference'
        - $ref: '#/components/schemas/LikedOutfitReference'
      discriminator:
        propertyName: item_type
        mapping:
          LIKED_PRODUCT: '#/components/schemas/LikedProductReference'
          PURCHASED_PRODUCT: '#/components/schemas/PurchasedProductReference'
          UPLOADED_ITEM: '#/components/schemas/UploadedItemReference'
          LIKED_OUTFIT: '#/components/schemas/LikedOutfitReference'

    GenericItem:
      required:
        - id
        - item_type
      type: object
      properties:
        id:
          description: Unique identifier of an item within Wardrobe.
          type: string
        item_type:
          $ref: '#/components/schemas/GenericItemType'
    LikedProductReference:
      allOf:
        - $ref: '#/components/schemas/GenericItem'
        - type: object
          properties:
            config_sku:
              type: string
              description: Config SKU of the article that was liked by the customer
            simple_sku:
              type: string
              description: Simple SKU that represents size liked by the customer.
            cursor:
              type: string
              example: '212113'
      required:
        - config_sku
        - cursor
    SavedProductReference:
      allOf:
        - $ref: '#/components/schemas/GenericItem'
        - type: object
          properties:
            config_sku:
              type: string
              description: Config SKU of the article saved in the list
            simple_sku:
              type: string
              description: Simple SKU that represents size shared by the customer.
            cursor:
              type: string
              example: '212113'
      required:
        - config_sku
        - cursor
    PurchasedProductReference:
      allOf:
        - $ref: '#/components/schemas/GenericItem'
        - type: object
          properties:
            config_sku:
              type: string
              description: Config SKU of the article that was liked by the customer
            simple_sku:
              type: string
              description: Simple SKU that represents size purchased by customer.
            cursor:
              type: string
              example: '212113'
      required:
        - config_sku
        - simple_sku
        - cursor
    UploadedItemReference:
      allOf:
        - $ref: '#/components/schemas/GenericItem'
        - type: object
          properties:
            cursor:
              type: string
              example: '212113'
      required:
        - cursor
    LikedOutfitReference:
      allOf:
        - $ref: '#/components/schemas/GenericItem'
        - type: object
          properties:
            outfit_id:
              type: string
              description: Id of the outfit liked by the customer.
            cursor:
              type: string
              example: '212113'
            created_at:
              type: string
              format: date-time
            updated_at:
              type: string
              format: date-time
      required:
        - outfit_id
        - cursor
    SavedOutfitReference:
      allOf:
        - $ref: '#/components/schemas/GenericItem'
        - type: object
          properties:
            outfit_id:
              type: string
              description: Id of the outfit shared by the customer.
            cursor:
              type: string
              example: '212113'
      required:
        - outfit_id
        - cursor
    GenericItemType:
      type: string
      description: >-
        Describes the kind of item and provides a structural hint regarding what
        optional properties will be present. E.g.: ARTICLE items will always
        have the article attribute
      x-extensible-enum:
        - LIKED_PRODUCT
        - PURCHASED_PRODUCT
        - UPLOADED_ITEM
        - LIKED_OUTFIT
